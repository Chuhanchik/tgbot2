import logging
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram import F
import asyncio
from datetime import datetime

API_TOKEN = '8007841552:AAGCP4ufCMEUvGS-zIFhtpud_w0AZwPrCCU'

logging.basicConfig(level=logging.INFO)

bot = Bot(token=API_TOKEN)
dp = Dispatcher()

class HolidayCalendar:
    def __init__(self):
        self.holidays = {
            'world': {
                '1 января - Новый Год',
          '2 января - День научной фантастики',
          '3 января - День пива',
          '4 января - День азбуки Брайля',
          '5 января - День скаутов',
          '6 января - День поцелуев',
          '7 января - Рождество',
          '8 января - День вращения Земли',
          '9 января - День хореографа',
          '10 января - День инженера-механика ВМФ России',
          '11 января - День "Спасибо"',
          '12 января - День работника прокуратуры',
          '13 января - День российской печати',
          '14 января - Старый Новый год',
          '15 января - День образования Следственного комитета Российской Федерации',
          '16 января - Всемирный день «The Beatles»',
          '17 января - День детских изобретений',
          '18 января - День Лентяев',
          '19 января - День птиц',
          '20 января - День любителя сыра',
          '30 января - День инженерных войск',
          '31 января - День Дедушки',
          '1 февраля - День десерта',
          '2 февраля - День победы в Сталинградской битве',
          '3 февраля - День борьбы с ненормативной лексики',
          '4 февраля -',
          '5 февраля -',
          '6 февраля -',
          '7 февраля -',
          '8 февраля -',
          '9 февраля -',
          '10 февраля -',
          '11 февраля -',
          '12 февраля -',
          '13 февраля -',
          '14 февраля -',
          '15 февраля -',
          '16 февраля -',
          '17 февраля -',
          '18 февраля -',
          '19 февраля -',
          '20 февраля -',
          '21 февраля -',
          '22 февраля -',
          '23 февраля -',
          '24 февраля -',
          '25 февраля -',
          '26 февраля -',
          '27 февраля -',
          '28 февраля -',
          '29 февраля -',
          '1 марта -',
          '2 марта -',
          '3 марта -',
          '4 марта -',
          '5 марта -',
          '6 марта -',
          '7 марта -',
          '8 марта -',
          '9 марта -',
          '10 марта -',
          '11 марта -',
          '12 марта -',
          '13 марта -',
          '14 марта -',
          '15 марта -',
          '16 марта -',
          '17 марта -',
          '18 марта -',
          '19 марта -',
          '20 марта -',
          '21 марта -',
          '22 марта -',
          '23 марта -',
          '24 марта -'
          '25 марта -'
          '26 марта -'
          '27 марта -'
          '28 марта -'
          '29 марта -'
          '30 марта -'
          '31 марта -'
          '1 апреля -'
          '2 апреля -'
          '3 апреля -'
          '4 апреля -'
          '5 апреля -'
          '6 апреля -'
          '7 апреля -'
          '8 апреля -'
          '9 апреля -'
          '10 апреля -'
          '11 апреля -'
          '12 апреля -'
          '13 апреля -'
          '14 апреля -'
          '15 апреля -'
          '16 апреля -'
          '17 апреля -'
          '18 апреля -'
          '19 апреля -'
          '20 апреля -'
          '21 апреля -'
          '22 апреля -'
          '23 апреля -'
          '24 апреля -'
          '25 апреля -'
          '26 апреля -'
          '27 апреля -'
          '28 апреля -'
          '29 апреля -'
          '30 апреля -'
          '1 мая -'
          '2 мая -'
          '3 мая -'
          '4 мая -'
          '5 мая -'
          '6 мая -'
          '7 мая -'
          '8 мая -'
          '9 мая -'
          '10 мая -'
          '11 мая -'
          '12 мая -'
          '13 мая -'
          '14 мая -'
          '15 мая -'
          '16 мая -'
          '17 мая -'
          '18 мая -'
          '19 мая -'
          '20 мая -'
          '21 мая -'
          '22 мая -'
          '23 мая -'
          '24 мая -'
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          '13 июля - День рождения Юлии Викторовны'
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          ''
          '',
          '',
          ''
            },
            'orthodox': {
                '01-07': 'Рождество Христово',
                '02-15': 'Сретение Господне',
                '04-17': 'Пасха',
            },
            'muslim': {
                '01-01': 'Ид аль-Фитр',
                '10-01': 'Ид аль-Адха',
            }
        }

    def get_holiday(self, date, calendar_type):
        month_day = date.strftime('%m-%d')
        return self.holidays.get(calendar_type, {}).get(month_day, 'Нет праздников на этот день.')

calendar = HolidayCalendar()

@dp.message(Command("start"))
async def start_command(message: types.Message):
    keyboard = ReplyKeyboardMarkup(resize_keyboard=True)
    buttons = [
        KeyboardButton("Всемирный календарь"),
        KeyboardButton("Православный календарь"),
        KeyboardButton("Мусульманский календарь")
    ]
    keyboard.add(*buttons)
    await message.answer("Выберите календарь:", reply_markup=keyboard)

@dp.message(F.text.in_(["Всемирный календарь", "Православный календарь", "Мусульманский календарь"]))
async def calendar_choice(message: types.Message):
    calendar_type = 'world' if message.text == "Всемирный календарь" else 'orthodox' if message.text == "Православный календарь" else 'muslim'
    today = datetime.now()
    holiday = calendar.get_holiday(today, calendar_type)
    await message.answer(f"Сегодня: {today.strftime('%d-%m-%Y')}\nПраздник: {holiday}")

async def main():
    await dp.start_polling(bot)

if __name__ == '__main__':
    asyncio.run(main())